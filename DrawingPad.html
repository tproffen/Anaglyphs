<!DOCTYPE html>
<html>
  <head>
    <title>Anaglyph Drawing App</title>
	<link href="styles/Anaglyphs.css" rel="stylesheet"  type="text/css">
  </head>
  <body>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript" src="scripts/DrawingPad.js"></script>
  <script type="text/javascript" src="scripts/Anaglyphs.js"></script>

  <table>
  	<tr><th colspan="2">
	  <div id="warning" name="warning"></div>
	  <h1>Anaglyph Drawing Pad</h1></th></tr>
	<tr><td id="canvasArea" class="white">
	    <canvas id="canvas">Your browser does not support the HTML 5 Canvas.</canvas></td>
	
	<td><input type="button" value="Clear" id="clearCanvas">
		<input type="button" value="Eraser" id="eraser">

		<br>&nbsp;<br>

		<input type="button" value="Undo" id="Undo">
		<input type="button" value="Redo" id="Redo">

		<br>&nbsp;<br>
		
			Depth: <output name="offsetOutput" id="offsetOutputId">5</output>
	        <input type="range" value="3" min="-10" max="10" step="0.5" id="offset" 
			       oninput="offsetOutputId.value = offset.value">
	        Size: <output name="lineWidthOutput" id="lineWidthOutputId">5</output>
	        <input type="range" value="5" min="1" max="20" step="0.5" id="lineWidth" 
			       oninput="lineWidthOutputId.value = lineWidth.value">

		<br>&nbsp;<br>
			Text:<br>
			<input type="text" id="stringValue"><br>
	        <input type="button" value="Place text" id="placeText">
		
		<br>&nbsp;<br>
			Stamp:<br>
    		<select id="stamps"></select><br>
			<input type="button" value="Place stamp" id="placeStamp">
		<br>&nbsp;<br>
		<hr>
		<br>&nbsp;<br>		
			<input type="button" value="Download image" onclick="download()">
	</td></tr>
	<tr><td colspan="2">
		<p align="left" class="footer">(c) <a href="mailto:thomasproffen@gmail.com">Thomas Proffen</a>, <span id="year"></span>.
		<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" 
		   style="border-width:0" align="right" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"/></a>
		</p>
	</td></tr>	
  </table>
	<center><font size="-1">Use red-cyan glasses to see your drawing in 3D.</font></center>
    
	<script type="text/javascript">drawingApp.init();</script>
	<script>
	document.getElementById("year").innerHTML = new Date().getFullYear();
	
	function getRandomFileName() {
		var timestamp = new Date().toISOString().replace(/[-:.]/g,"");  
		var random = ("" + Math.random()).substring(2, 8); 
		var random_number = timestamp+random;  
		return "Anaglyph-"+random_number+".png";
	}
	function download() {
		var canvas = document.getElementById("canvas");
		var dataURL = canvas.toDataURL("image/png");
		var link = document.createElement("a");
		link.href = dataURL;
		link.download = getRandomFileName();
		link.click(); 
	}
  </script>
</body>
</html>
